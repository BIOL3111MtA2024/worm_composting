---
title: "Introduction of microbes at different intervals in vermicast systems"
date: "`r format(Sys.Date())`"
author:
- Georgia Pardy^1^*
- Sylvia Le^1^*
- Rajan Minocha-McKenney^1^*
- Douglas Campbell^1^*
- Liza Barney^1^*
output:
  bookdown::html_document2:
    code_folding: show
    keep_md: yes
    toc: TRUE
    toc_float: TRUE
    toc_depth: 6
    fig_caption: yes
editor_options: 
  markdown: 
    wrap: 72
---
```{css, echo=FALSE}
p.caption {
  font-size: 18px;
}
```


# Affiliations {-}
^1^Mount Allison University, New Brunswick, Canada  


# Acknowledgements {-}
Brackets minus after heading excludes heading from numbering.
DAC was supported by the Canada Research Chairs.
Lisa Barney offered support and resources throughout the project

# Introduction
## Background
Vermicasting is a method of composting that uses worms to break down organic waste into soil. Microorganisms in the worm's gut and within waste aid this process. It also contributes to the product's biodiversity, which impacts the soil quality 

There are several strategies for vermicastors to introduce microbial biodiversity into their systems. One way is to introduce outside composted material, or forest soil to the system. There is debate if there's an ideal time to add the additional substrate

## Research Question
Does introducing microorganisms to a vermicast system increase the microbial biodiversity of the product, and if so, is there an optimal time for their introduction?

## Hypothesis
Adding pre-composted material to vermicast systems at any stage of development will result in a more microbially biodiverse product.

## Prediction
Vermicast systems with additional microorganisms introduced earlier will break down organic waste faster than vermicast systems that had them introduced later.


# Materials & Methods of Data Importation  
## Set chunk options
Formatted display of content from .md file on GitHub site.
Upon knitr figures will be saved to 'Figs/'
```{r setup, include=FALSE}
knitr::opts_chunk$set(warning = FALSE, error = FALSE, message = FALSE)
knitr::opts_chunk$set(fig.path='Figs/')
```

## Load packages
```{r packages, include = FALSE}
library(tidyverse) #core packages from Tidyverse
library(googledrive) #access to Google Drive
library(googlesheets4) #access to Google Sheets
library(lubridate) #tidyverse handling dates & times
```

## InLine Citations of software packages added through the 'citr' option under 'Addins'.  
The cited items must be in the .bib file saved in the .Rproj folder; in this case RPackageCitations.bib, generated by exporting a library to .bib from Zotero.  Upon export click the 'Keep Updated' button in the BetterBibTex menu.  If new citations are added to Zotero they will be pushed through to update the exported .bib file in the .Rproj folder.
[@bryanGooglesheets4AccessGoogle2021;@mcgowanGoogledriveInterfaceGoogle2020; @wickhamTidyverseEasilyInstall2017]

<<<<<<< HEAD

## Import Data from a GoogleSheet
Data in a GoogleSheet is more generic than a project-specific .csv edited and saved locally and pushed to GitHub.
The GoogleSheet package interface was used, with guidance from Dr Campbell


## Connect to google account
The Google account that contained the data-sheets was de-authorized. This allowed universal access to the raw data sheet.Then retrieve data sheet from where it's stored on google drive.
```{r connect_google}
=======
## Source locally saved functions stored in a text file
A text file of functions is a preliminary step towards a package, to re-use functions without re-pasting them.

## Set Project Variables  
Try to set all user-defined variables near top of .Rmd, in one place, to avoid or limit editing of downstream code.
Assigning project-specific values to generic variables helps with re-use of code.
```{r set variables}
DataIn <- "XXXX"
TargetFile <- "YYYY"
  
```


# Import Data from a GoogleSheet
Data in a Google Sheet is more generic than a project-specific .csv edited and saved locally and pushed to GitHub.
The Google Sheet package interface can be tricky.
Repeatedly reading from Google Drive can provoke a throttle from Google.


# Connect to google account
The Google account that contained the data-sheets was de-authorized. This allowed universal access to the raw data sheet.Then retrieve data sheet from where it's stored on Google Drive.
```{r connect_google}
#Instead of sending a token, Google Sheets4 will send an API key. This can be used to access public resources for which no Google sign-in is required. 
>>>>>>> e16c748667136f0b232aaef8cb1eb37cf8accd5d
googlesheets4::gs4_deauth()

#URL of the Google Sheet so that it is available to anyone
googlesheet_url <- "https://docs.google.com/spreadsheets/d/1VpTn7voQ0889RoEloQtZFyVJyPMIRbACklrrquOiC7c/edit?usp=sharing"
```


## Accessing sheets
Below are the commands neccesary to import the open source data from the vermicast project into R studio

```{r accessing_sheets}
PhysChemL <- read_sheet(googlesheet_url, sheet = "PhysChemL")
PhysChemP <- read_sheet(googlesheet_url, sheet = "PhysChemP")
```

# Analysis the biodiversities of the different colonies within the treatments

```{r methods set up, fig.cap = "Figure 1: Vermicast system made from 2L pop bottle which was put over top a petri dish to collect output from system. ", out.height="800pt", out.width="100%", echo = FALSE}

knitr::include_graphics(file.path("..", "Data", "RawData", "Method_Set_Up.png"))
```

## Experiment groups:
1. Worms and apples
2. Worms, apples and dirt
3. Worms, apples and dirt one week before
4. Worms, apples and dirt one week after
5. Dirt and apples


```{r methods overall, fig.cap = "Worm Composting Experiment Process.", out.height="800pt", out.width="100%", echo = FALSE}

knitr::include_graphics(file.path("..", "Data", "RawData", "Method_Overall_Set_Up.png"))
```

Figure 2. Schematic of vermicast culturing process for worm pellet liquid output. Colony analysis of colonies using microscopy and gram-staining. Created using BioRender.com.


```{r plate examples, fig.cap = "Figure 3. Example of cultured vermicast liquid for experimental groups 1-5, respectively.", out.height="800pt", out.width="100%", echo = FALSE}

knitr::include_graphics(file.path("..", "Data", "RawData", "Plate_Colony_Examples.png"))
```

## Biodivesity of the vermicast liquid output

```{r colony_explore}
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Colony_Type), fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() +
  labs(
    title = "Colony Type Across Treatments in Compost Liquid"
  )
```
Figure 4. Identification of colony types for vermicast liquid of experimental groups 1-4 from microscopy observations. The plot was created using R software.

Treatment 5 was an outlier, as it had a fungus covering most of the colonies, making them inaccessible. A secondary figures excluding it was created to better visualize the similarities and differences of bacterial colony biodiversity between treatments. 

## Biodivesity of the vermicast liquid output, removing the outlier
```{r colony_explore_filter_treatment5}
PhysChemL |>
  filter(Treatment != 5) |>
  ggplot() +
  geom_histogram(aes(Colony_Type), fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() +
  labs(
    title = "Colony Type Across Treatments in Vermicast Liquid Output"
  )
```

Figure 5. 

## Comparasion of Vermicast liquid output and Vermicast solids Output

```{r ColonyType_explore2}
PhysChemP |>
  ggplot() +
  geom_histogram(aes(Colony_Type),fill = "#ef926e" ) +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() +
  labs(
    title = "Colony Types Across Treatments of Compost Pellet"
  )
```

Figure 6.

The solid vermicast is the main product of a functioning vermicast system. These were also tested for the biodiversity between colonies. It was found there was little biodiversity of bacterial colonies between treatments.

```{r liquid_pellet_comparasion}
# Combine two dataframe
PhysChem_combined <- bind_rows(
  PhysChemP %>% mutate(Source = "Pellet"),
  PhysChemL %>% mutate(Source = "Liquid")
)

# Plot the data
  ## scale_fill_brewer(palette = "______"): set color for the graph
  ## position = "dodge" : put the columns side-by-side
  ## binwidth = ____ : changing size of the columns
ggplot(PhysChem_combined) +
  geom_histogram(aes(x = Colony_Type, fill = Source), position = "dodge", binwidth = 1) +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() +
  scale_fill_brewer(palette = "Set2") +
  labs(
    title = "Comparison of Colony Types between Compost Pellet and Liquid ",
    x = "Colony_Type",
    y = "Count",
    fill = "Figure"
  )
```
Figure 7. Identification of colony types for pellet and vermicast liquid of experimental groups 1-5 from microscopy observations. The plot was created using R software.

After the initial realization that there was less biodiversity in bacterial colonies between treatments than the liquid, it was determined to be beneficial to compare the results between treatments. This graphs supports that there is more biodiversity in colonies from the liquid of each treatment than from the solid vermicast. 
This suggests that the microbial biodiversity from vermicast systems is not deriving from the gut of the worm.


# Analysis of bacterial colonies using microscopy

<<<<<<< HEAD
To further determine differences between bacteria colonies, microscopy was used. This helped to determine wheather colonies that had similar appearance were actually the same bacteria through analysis of shape and gram-staining.
=======
To further determine differences between bacteria types, microscopy was used. This helped to determine whether colonies that had similar appearance were actually the same bacteria through analysis of shape and gram-staining.
>>>>>>> e16c748667136f0b232aaef8cb1eb37cf8accd5d

## Analysis of the diffrent shapes under the microscopes

<<<<<<< HEAD
Determining the different shapes in the colony allows to learn more about the different bacteria forms each treatments had, and gives in-depth insights to the bacteria biodiversity present in each colony.
=======
```{r Size_Shape_explore}

PhysChemL |>
  ggplot() +
  geom_histogram(aes(Size_um), fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment), cols = vars(Shape)) +
  theme_bw() +
  labs(
    title = "Bacteria Size Across Different Shapes and Treatments in Compost Liquid"
  )
```

Figure 8.

## Analysis of the diffrent shapes under the microscopes, with removal of the outlier
>>>>>>> e16c748667136f0b232aaef8cb1eb37cf8accd5d

```{r Shape_explore}
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Shape), stat="count", fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment)) +
  theme_bw()+
  labs(
    title = "Colony Shapes Across Treatments in Compost Liquid"
  )
```
Figure 4. Characterization of size  from the vermicast liquid of treatment groups 1-5 from microscopy observations. The plot was created using R software.



##Analysis of the diffrent shapes and sizes of bacteria present across treatments

Size was another factor observed using microscopy, as comparing the diffrent sizes of the bacteria size provides another factor when assesing the biodiversity between different treatments

<<<<<<< HEAD
=======
Figure 9. 

##Analysis of the diffrent shapes and sizes of bacteria present in each treatment
>>>>>>> e16c748667136f0b232aaef8cb1eb37cf8accd5d

```{r Size_Shape_explore2}
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Size_um),fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment), cols = vars(Shape)) +
  theme_bw() +
  labs(
    title = "Bacteria Size Across Different Shapes and Treatments in Compost Liquid"
  )
```

<<<<<<< HEAD
Figure 5. Characterization of size and shape from the vermicast liquid of treatment groups 1-5 from microscopy observations. The plot was created using R software.

This figure provides insight in the different sizes and shapes of the bacteria found in each treatment. It shows that even though there were similar shapes across colonies, there were differing sizes. This suggests that though some colonies visually appear the same, they are actually different bacterium. 

=======
Figure 10.

```{r Size_explore}
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Size_um),fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() +
  labs(
    title = "Colony Size Across Treatments in Compost Liquid"
  )
```

Figure 11.

```{r Plate_Colony_explore}
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Plate_Colony),fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() 
```

Figure 12.

This graph shows how many colonies were taken from each plate, and how many bacteria types were in each colony (liquid)
>>>>>>> e16c748667136f0b232aaef8cb1eb37cf8accd5d

```{r Size_Gram_explore}
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Gram),fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment), cols = vars(Shape)) +
  theme_bw() +
  labs(
    title = "Colony Gram Across Treatments and Shapes in Compost Liquid "
  )
```

Figure 13.


```{r Gram_explore}
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Gram),fill = "#7bbea5") +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() +
  labs(
    title = "Colony Gram Across Treatments of Compost Pallet "
  )
```

Figure 14.

```{r Gram_ColonyType_explore}
## scale_x_continuous(breaks = c(a,b)) : in which set x-axis to display specific numbers value
PhysChemL |>
  ggplot() +
  geom_histogram(aes(Gram),fill = "#7bbea5", binwidth = 0.2) +
  facet_grid(rows = vars(Treatment), cols = vars(Colony_Type)) +
  scale_x_continuous(breaks = c(0, 1)) +
  theme_bw()+
  labs(
    title = "Colony Gram Across Treatments and Colony Types of Compost Liquid"
  )
```
Figure 15. Identification of gram staining (0 = negative, 1 =positive) for the different colony types for vermicast liquid of experimental groups 1-5. The plot was created using R software.

This graph shows us the different gram stains across colonies in the treatment types, which let us see if the colonies have consistent gram types across treatments. If they don't, they were likely different colonies. 


```{r gram stain examples, fig.cap = "Figure 16. Examples of gram stains from treatment groups 1-5. Includes two from treatment group 4, demonstrating contrasting results between colonies of the same treatment group.", out.height="800pt", out.width="100%", echo = FALSE}

knitr::include_graphics(file.path("..", "Data", "RawData", "Gram_Stain_Groups.png"))
```


This next section is looking at the biodiversity of the worm pellets. (PhysChem2) We overall have less information for this, but putting the graphs side by side during a presentation could be helpful

Colony type per treatment is really the only thing we can do here, see data dictionary for description
```{r ColonyType_explore}
# add , fill = "#7bbea5" if want color
PhysChemP |>
  ggplot() +
  geom_histogram(aes(Colony_Type), fill = "#ef926e") +
  facet_grid(rows = vars(Treatment)) +
  theme_bw() +
  labs(
    title = "Colony Types Across Treatments of Compost Pellet"
  )
```

Figure 17.


# Conclusion

# Bibliography